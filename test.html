<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no, shrink-to-fit=no" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		
		<title>isoRearCamera</title>
		
		<style>
			#snapshot {
				position:absolute; 
				left: 400px; 
				border: 1px solid black; 
				display:none; 
			}
			
			#buttons-wrapper {
				position: absolute;
				top: 320px; 
				left: 0px;  
			}

			.buttons{
				width: 100px; 
				height: 35px; 
			}
		</style>
	</head>
	<body>
		<video id="player" autoplay playsinline width=300 height=200></video>
		<canvas id="snapshot" width=300 height=200></canvas>
		<div id="buttons-wrapper">
			<button id="capture">Capture</button>
		</div>
		
		<script>
			const medias = {audio : false, video : {facingMode : {exact : "environment"}}};
		
			var player = document.getElementById('player'); 
			var snapshotCanvas = document.getElementById('snapshot');
			var captureButton = document.getElementById('capture');

			captureButton.addEventListener('click', function() {
				var context = snapshot.getContext('2d');
				// Draw the video frame to the canvas.
				context.drawImage(player, 0, 0, snapshotCanvas.width, snapshotCanvas.height);
				player.remove();
			});
			
			function successCallback(stream) {
				// Attach the video stream to the video element and autoplay.
				player.srcObject = stream;
			};
			
			function errorCallback(err) {
				alert(err);
			};

			navigator.getUserMedia(medias, successCallback, errorCallback);
		</script>
	</body>
</html>





